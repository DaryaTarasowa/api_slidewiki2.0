ALTER TABLE slidewiki.slide_revision
  ADD title varchar(40) NULL
    AFTER id;

ALTER TABLE slidewiki.slide_revision
  ADD (origin tinytext NULL,
       language tinytext NULL,
       translated_from int(11) NULL,
       branch_owner int(11) NULL),
  DROP license,
  CHANGE slide branch_id int(11);

ALTER TABLE slidewiki.deck_revision
  ADD (origin tinytext NULL,
       language tinytext NULL,
       translated_from int(11) NULL,
       branch_owner int(11) NULL),
  DROP license,
  CHANGE deck_id branch_id int(11);

UPDATE deck, deck_revision 
SET deck_revision.language = deck.language,
deck_revision.origin = deck.description,
deck_revision.translated_from = deck.translated_from,
deck_revision.translated_from_revision = deck.translated_from_revision,
deck_revision.branch_owner = deck.user_id
WHERE deck_revision.branch_id = deck.id;

UPDATE slide, slide_revision 
SET slide_revision.language = slide.language,
slide_revision.origin = slide.description,
slide_revision.translated_from = slide.translated_from,
slide_revision.translated_from_revision = slide.translated_from_revision,
slide_revision.branch_owner = slide.user_id
WHERE slide_revision.branch_id = slide.id;

DROP TABLE IF EXISTS deck;
DROP TABLE IF EXISTS doubtful;
DROP TABLE IF EXISTS service_table;
DROP TABLE IF EXISTS slide;
DROP TABLE IF EXISTS test_results;



